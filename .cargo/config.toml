# Cargo build configuration for CUDA-enabled Rust project

[build]
# Use all available CPU cores for compilation
jobs = 8

[target.x86_64-unknown-linux-gnu]
# Link to CUDA libraries
rustflags = [
    "-C", "link-arg=-Wl,-rpath,/usr/local/cuda/lib64",
    "-L", "/usr/local/cuda/lib64",
]

# Environment variables for CUDA
[env]
CUDA_ROOT = "/usr/local/cuda"
CUDA_PATH = "/usr/local/cuda"
CUDA_LIB_PATH = "/usr/local/cuda/lib64"
LD_LIBRARY_PATH = "/usr/local/cuda/lib64:$LD_LIBRARY_PATH"

# Optimization settings
[profile.release]
opt-level = 3
lto = "thin"
codegen-units = 1
panic = "abort"

[profile.bench]
inherits = "release"

# Fast compile times for development
[profile.dev]
opt-level = 0
debug = true
split-debuginfo = "unpacked"

# Network settings
[net]
git-fetch-with-cli = true

# Registry configuration
[registries.crates-io]
protocol = "sparse"
